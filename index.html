<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SimpleX B2 - Core English</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Manrope:wght@400;700;800&display=swap');
        body { background: #080a0c; color: #f1f5f9; font-family: 'Manrope', sans-serif; }
        .tab-content { display: none; }
        .active { display: block; }
        .glass { background: #12161b; border: 1px solid #232a35; border-radius: 20px; }
        .btn-action { background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); transition: all 0.2s; }
        .btn-action:active { transform: scale(0.96); opacity: 0.9; }
    </style>
</head>
<body class="p-4 flex flex-col min-h-screen max-w-md mx-auto">

    <header class="flex justify-between items-center mb-6">
        <div>
            <h1 class="text-xl font-black text-blue-500 tracking-tighter">SimpleX <span class="text-[10px] bg-blue-500/20 px-2 py-0.5 rounded text-blue-400">B2 READY</span></h1>
        </div>
        <div class="flex gap-3 text-[10px] font-bold uppercase text-gray-500">
            <div class="text-right">–û—à–∏–±–∫–∏: <span id="top-err" class="text-red-500 block text-sm">0</span></div>
            <div class="text-right">–°–ª–æ–≤–∞: <span id="top-words" class="text-green-500 block text-sm">0</span></div>
        </div>
    </header>

    <main class="flex-1">
        <section id="tab-learn" class="tab-content active">
            <div id="module-selector" class="mb-6 overflow-x-auto flex gap-2 pb-2 no-scrollbar">
                <button onclick="loadLevel('A1')" class="px-4 py-2 glass text-[10px] font-bold uppercase whitespace-nowrap border-blue-500/30">A1: –û—Å–Ω–æ–≤—ã</button>
                <button onclick="loadLevel('A2')" class="px-4 py-2 glass text-[10px] font-bold uppercase whitespace-nowrap">A2: –ë—ã—Ç</button>
                <button onclick="loadLevel('B1')" class="px-4 py-2 glass text-[10px] font-bold uppercase whitespace-nowrap">B1: –°–≤–æ–±–æ–¥–∞</button>
                <button onclick="loadLevel('B2')" class="px-4 py-2 glass text-[10px] font-bold uppercase whitespace-nowrap">B2: –ü—Ä–æ—Ñ–∏</button>
            </div>

            <div class="glass p-6 mb-4 relative overflow-hidden">
                <div id="level-indicator" class="absolute top-0 right-0 bg-blue-600 px-3 py-1 text-[8px] font-black rounded-bl-xl">A1</div>
                <p class="text-gray-500 text-[10px] uppercase font-bold mb-2">–ü–µ—Ä–µ–≤–µ–¥–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ:</p>
                <h2 id="q-ru" class="text-lg font-bold mb-6">–ó–∞–≥—Ä—É–∑–∫–∞...</h2>
                <div id="build-area" class="min-h-[60px] border-b border-gray-800 mb-6 flex flex-wrap gap-2 pb-2"></div>
                <div id="options" class="flex flex-wrap gap-2"></div>
            </div>
            <button onclick="checkAnswer()" class="w-full py-4 btn-action rounded-2xl font-bold text-sm shadow-lg shadow-blue-500/20">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–≤–µ—Ç</button>
        </section>

        <section id="tab-stats" class="tab-content">
            <h2 class="text-xl font-bold mb-4">–¢–≤–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å</h2>
            <div class="grid grid-cols-2 gap-4 mb-6">
                <div class="glass p-4"><p class="text-[10px] text-gray-500 uppercase font-bold mb-1 italic">–ò–∑—É—á–µ–Ω–æ —Ñ—Ä–∞–∑</p><p id="count-learned" class="text-3xl font-black">0</p></div>
                <div class="glass p-4"><p class="text-[10px] text-gray-500 uppercase font-bold mb-1 italic text-red-500">–í—Å–µ–≥–æ –æ—à–∏–±–æ–∫</p><p id="count-errors" class="text-3xl font-black text-red-500">0</p></div>
            </div>
            <div class="glass p-5">
                <h3 class="text-xs font-bold mb-4 border-b border-gray-800 pb-2 uppercase text-gray-400 tracking-widest">–ñ—É—Ä–Ω–∞–ª —Ä–∞–±–æ—Ç—ã –Ω–∞–¥ –æ—à–∏–±–∫–∞–º–∏:</h3>
                <div id="error-log" class="space-y-4 text-[11px]">
                    <p class="text-gray-600 italic">–ó–¥–µ—Å—å –±—É–¥—É—Ç –ø–æ—è–≤–ª—è—Ç—å—Å—è —Ñ—Ä–∞–∑—ã, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –≤—ã –æ—à–∏–±–ª–∏—Å—å...</p>
                </div>
            </div>
            <button onclick="resetStats()" class="mt-8 text-[9px] text-gray-700 uppercase font-bold hover:text-red-500 transition-colors">–°–±—Ä–æ—Å–∏—Ç—å –≤–µ—Å—å –ø—Ä–æ–≥—Ä–µ—Å—Å</button>
        </section>
    </main>

    <nav class="fixed bottom-0 left-0 right-0 max-w-md mx-auto bg-black/90 backdrop-blur-md border-t border-gray-900 p-5 flex justify-around rounded-t-[35px]">
        <button onclick="switchTab('tab-learn')" class="text-xl filter grayscale hover:grayscale-0 transition-all">üß©</button>
        <button onclick="switchTab('tab-stats')" class="text-xl filter grayscale hover:grayscale-0 transition-all">üìä</button>
    </nav>

    <script>
        // –ë–ê–ó–ê –ó–ù–ê–ù–ò–ô B2 (–ü—Ä–∏–º–µ—Ä –Ω–∞–ø–æ–ª–Ω–µ–Ω–∏—è)
        const knowledgeBase = {
    A1: [ // Beginner: –û—Å–Ω–æ–≤—ã, –≥–ª–∞–≥–æ–ª to be, Present Simple
        {ru: "–Ø —Å—Ç—É–¥–µ–Ω—Ç", en: ["I", "am", "a", "student"]},
        {ru: "–û–Ω–∞ –∂–∏–≤–µ—Ç –≤ –õ–æ–Ω–¥–æ–Ω–µ", en: ["She", "lives", "in", "London"]},
        {ru: "–£ –Ω–∏—Ö –µ—Å—Ç—å –º–∞—à–∏–Ω–∞", en: ["They", "have", "a", "car"]},
        {ru: "–í—ã –≥–æ–≤–æ—Ä–∏—Ç–µ –ø–æ-–∞–Ω–≥–ª–∏–π—Å–∫–∏?", en: ["Do", "you", "speak", "English?"]},
        {ru: "–°–µ–≥–æ–¥–Ω—è —Ö–æ–ª–æ–¥–Ω–æ", en: ["It", "is", "cold", "today"]},
        {ru: "–Ø –Ω–µ –ª—é–±–ª—é –∫–æ—Ñ–µ", en: ["I", "do", "not", "like", "coffee"]}
    ],
    A2: [ // Elementary: Past Simple, Future Simple, Comparison
        {ru: "–ú—ã –≤—á–µ—Ä–∞ —Å–º–æ—Ç—Ä–µ–ª–∏ —Ñ–∏–ª—å–º", en: ["We", "watched", "a", "movie", "yesterday"]},
        {ru: "–Ø –ø–æ–∑–≤–æ–Ω—é —Ç–µ–±–µ –∑–∞–≤—Ç—Ä–∞", en: ["I", "will", "call", "you", "tomorrow"]},
        {ru: "–≠—Ç–æ—Ç –¥–æ–º –±–æ–ª—å—à–µ —Ç–æ–≥–æ", en: ["This", "house", "is", "bigger", "than", "that", "one"]},
        {ru: "–¢—ã –±—ã–ª –≤ –ü–∞—Ä–∏–∂–µ?", en: ["Have", "you", "been", "to", "Paris?"]},
        {ru: "–Ø —É–º–µ—é –ø–ª–∞–≤–∞—Ç—å –æ—á–µ–Ω—å —Ö–æ—Ä–æ—à–æ", en: ["I", "can", "swim", "very", "well"]},
        {ru: "–í —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫–µ –µ—Å—Ç—å –º–æ–ª–æ–∫–æ", en: ["There", "is", "some", "milk", "in", "the", "fridge"]}
    ],
    B1: [ // Intermediate: Present Perfect, Passive Voice, Conditionals 1 & 2
        {ru: "–Ø —É–∂–µ –∑–∞–∫–æ–Ω—á–∏–ª —Ä–∞–±–æ—Ç—É", en: ["I", "have", "already", "finished", "the", "work"]},
        {ru: "–≠—Ç—É –∫–Ω–∏–≥—É –Ω–∞–ø–∏—Å–∞–ª–∏ –≤ 19 –≤–µ–∫–µ", en: ["This", "book", "was", "written", "in", "the", "19th", "century"]},
        {ru: "–ï—Å–ª–∏ –±—ã —è –±—ã–ª –±–æ–≥–∞—Ç, —è –±—ã –ø—É—Ç–µ—à–µ—Å—Ç–≤–æ–≤–∞–ª", en: ["If", "I", "were", "rich", "I", "would", "travel"]},
        {ru: "–ú–Ω–µ –Ω—É–∂–Ω–æ –ø–æ–¥—Å—Ç—Ä–∏—á—å—Å—è", en: ["I", "need", "to", "have", "my", "hair", "cut"]},
        {ru: "–û–Ω–∞ —Å–∫–∞–∑–∞–ª–∞, —á—Ç–æ –∑–∞–Ω—è—Ç–∞", en: ["She", "said", "that", "she", "was", "busy"]},
        {ru: "–Ø –ø—Ä–∏–≤—ã–∫ –≤—Å—Ç–∞–≤–∞—Ç—å —Ä–∞–Ω–æ", en: ["I", "am", "used", "to", "getting", "up", "early"]}
    ],
    B2: [ // Upper-Intermediate: Modal Verbs in Past, Conditionals 3, Advanced Phrasal Verbs
        {ru: "–¢–µ–±–µ —Å–ª–µ–¥–æ–≤–∞–ª–æ –ø–æ—Å–ª—É—à–∞—Ç—å –º–æ–µ–≥–æ —Å–æ–≤–µ—Ç–∞", en: ["You", "should", "have", "listened", "to", "my", "advice"]},
        {ru: "–Ø —Å –Ω–µ—Ç–µ—Ä–ø–µ–Ω–∏–µ–º –∂–¥—É –≤—Å—Ç—Ä–µ—á–∏ —Å –≤–∞–º–∏", en: ["I", "am", "looking", "forward", "to", "meeting", "you"]},
        {ru: "–ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –¥–æ–∂–¥—å, –º—ã –ø–æ—à–ª–∏ –≥—É–ª—è—Ç—å", en: ["Despite", "the", "rain", "we", "went", "for", "a", "walk"]},
        {ru: "–ï–¥–≤–∞ –ª–∏ —è –º–æ–≥ —á—Ç–æ-—Ç–æ —Å–¥–µ–ª–∞—Ç—å", en: ["There", "was", "hardly", "anything", "I", "could", "do"]},
        {ru: "–ï—Å–ª–∏ –±—ã —Ç—ã –ø–æ–∑–≤–æ–Ω–∏–ª, —è –±—ã –ø—Ä–∏—à–µ–ª", en: ["If", "you", "had", "called", "I", "would", "have", "come"]},
        {ru: "–ú–Ω–µ –ø—Ä–∏—à–ª–æ—Å—å –æ—Ç–º–µ–Ω–∏—Ç—å –≤—Å—Ç—Ä–µ—á—É", en: ["I", "had", "to", "call", "off", "the", "meeting"]}
    ]
};

        let currentLevel = 'A1';
        let currentIdx = 0;
        let userDraft = [];
        let stats = JSON.parse(localStorage.getItem('simplex_b2_stats')) || { learned: 0, errors: [], totalErrors: 0 };

        function save() {
            localStorage.setItem('simplex_b2_stats', JSON.stringify(stats));
            document.getElementById('top-err').innerText = stats.totalErrors;
            document.getElementById('top-words').innerText = stats.learned;
            document.getElementById('count-learned').innerText = stats.learned;
            document.getElementById('count-errors').innerText = stats.totalErrors;
            
            const log = document.getElementById('error-log');
            if(stats.errors.length > 0) {
                log.innerHTML = stats.errors.slice(-4).reverse().map(e => `
                    <div class="border-l-2 border-red-500 pl-3">
                        <div class="text-red-400 font-bold mb-1">–û—à–∏–±–∫–∞: ${e.wrong}</div>
                        <div class="text-green-500">–í–µ—Ä–Ω–æ: ${e.correct}</div>
                    </div>
                `).join('');
            }
        }

        function loadLevel(lvl) {
            currentLevel = lvl;
            currentIdx = 0;
            document.getElementById('level-indicator').innerText = lvl;
            initQuestion();
        }

        function initQuestion() {
            const q = knowledgeBase[currentLevel][currentIdx];
            document.getElementById('q-ru').innerText = q.ru;
            const opt = document.getElementById('options');
            opt.innerHTML = [...q.en].sort(() => Math.random() - 0.5).map(w => `
                <button onclick="pick('${w}', this)" class="bg-gray-800 px-4 py-2 rounded-xl border border-gray-700 text-sm font-bold active:bg-blue-600 transition-colors">${w}</button>
            `).join('');
            document.getElementById('build-area').innerHTML = '';
            userDraft = [];
        }

        function pick(word, btn) {
            userDraft.push(word);
            btn.style.visibility = 'hidden';
            const span = document.createElement('span');
            span.className = "bg-blue-600/20 text-blue-400 px-3 py-1 rounded-lg border border-blue-500/30 text-sm font-bold animate-fade-in";
            span.innerText = word;
            document.getElementById('build-area').appendChild(span);
        }

        function checkAnswer() {
            const correct = knowledgeBase[currentLevel][currentIdx].en.join(' ');
            const user = userDraft.join(' ');

            if(user === correct) {
                stats.learned++;
                currentIdx = (currentIdx + 1) % knowledgeBase[currentLevel].length;
                alert("–û—Ç–ª–∏—á–Ω–æ! –î–≤–∏–≥–∞–µ–º—Å—è –¥–∞–ª—å—à–µ.");
                initQuestion();
            } else {
                stats.totalErrors++;
                stats.errors.push({ wrong: user || "–ø—É—Å—Ç–æ", correct: correct });
                alert("–ù–µ —Å–æ–≤—Å–µ–º —Ç–∞–∫. –ü–æ–ø—Ä–æ–±—É–π –µ—â–µ —Ä–∞–∑ –∏–ª–∏ –∑–∞–≥–ª—è–Ω–∏ –≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É.");
                initQuestion();
            }
            save();
        }

        function switchTab(id) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.getElementById(id).classList.add('active');
        }

        function resetStats() {
            if(confirm("–°–±—Ä–æ—Å–∏—Ç—å –≤—Å—ë –æ–±—É—á–µ–Ω–∏–µ?")) {
                stats = { learned: 0, errors: [], totalErrors: 0 };
                save();
                location.reload();
            }
        }

        initQuestion();
        save();
    </script>
</body>
</html>
